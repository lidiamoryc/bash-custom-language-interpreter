# Mash Language Compiler Documentation

**Authors:** Emilia Myrta, Diana Misiaczy≈Ñska, Lidia Moryc 
**For AGH study course:** Theory of Compilation and Compilers


## üìå Project Description
This program is an **interpreter** for the Mash language, developed using **ANTLR** (Another Tool for Language Recognition). 
Mash is a simple scripting language inspired by **Bash**, allowing basic **arithmetic operations**, **logical expressions**, and **variable manipulation**. Additionally, the language supports **control structures** such as loops (**while, for**) and conditional statements (**if, elif, else**).


## üõ†Ô∏è Technologies Used
The project utilizes the following technologies and tools:

- **ANTLR** - A powerful parser generator for defining and processing programming languages.
- **Python** - The main programming language used for implementing the interpreter.
- **ANTLR4 Runtime for Python** - A library required to run the parser generated by ANTLR in Python.


## üìÇ Project Files
- `mash.g4` - The grammar file defining the syntax of the Mash language (ANTLR format).
- `mashLexer.py`, `mashParser.py`, `mashVisitor.py` - Files generated by ANTLR based on `mash.g4`.
- `mashVisitorCustom.py` - A custom visitor implementing the execution logic for the Mash language.
- `main.py` - The main script to run the interpreter.


## Grammar Structure
The grammar of the **Mash** language defines the following elements:

### Program Structure
- **Description:** A sequence of statements ending with EOF.
- **Grammar Definition:**
  ```antlr
  program : statement* EOF;
  ```

### Statements
- **Description:** Statements can include function calls (`echo`), variable declarations, assignments, and control structures (`if`, `while`, `for`).
- **Grammar Definition:**
  ```antlr
  statement : echo_function | var_declar | assignment | if_statement | while_statement | for_statement;
  ```

### Echo Function
- **Description:** Prints the value of an expression or variable to the standard output.
- **Grammar Definition:**
  ```antlr
  echo_function : 'echo' (expression | IDENTIFIER);
  ```
- **Example Usage:**
  ```mash
  echo "Hello, World!"
  ```

### Expressions
- **Description:** Arithmetic, logical, comparison expressions, and identifiers.
- **Grammar Definition:**
  ```antlr
  expression : arithmetic_expression | string_expression | logical_expression | int_expression | IDENTIFIER;
  ```
- **Example Usage:**
  ```mash
  5 + 3
  "Hello" + " " + "World"
  ```

### Variable Declarations
- **Description:** Declaring variables of type `string_var` or `int_var`, optionally assigning values.
- **Grammar Definition:**
  ```antlr
  var_declar : type IDENTIFIER ('=' (expression | IDENTIFIER))?;
  type : 'string_var' | 'int_var';
  ```
- **Example Usage:**
  ```mash
  int_var x = 5
  string_var name = "Mash"
  ```

### Assignments
- **Description:** Assigns values to previously declared variables.
- **Grammar Definition:**
  ```antlr
  assignment : IDENTIFIER '=' (expression | IDENTIFIER);
  ```
- **Example Usage:**
  ```mash
  x = 10
  ```

### While Loops
- **Description:** Executes a loop while a condition is true.
- **Grammar Definition:**
  ```antlr
  while_statement : 'while' '(' logical_expression ')' '{' statement* '}';
  ```
- **Example Usage:**
  ```mash
  while (x > 0) { echo x x = x - 1 }
  ```

### For Loops
- **Description:** Executes a loop with initialization, condition, and increment/decrement.
- **Grammar Definition:**
  ```antlr
  for_statement : 'for' '(' (assignment | var_declar) ';' logical_expression ';' (increment_statement | decrement_statement | assignment) ')' '{' statement* '}';
  ```
- **Example Usage:**
  ```mash
  for (int_var i = 0; i < 10; i = i + 1) {
      echo i
  }
  ```

### Conditional Statements
- **Description:** `if`, `elif`, and `else` statements.
- **Grammar Definition:**
  ```antlr
  if_statement : 'if' '(' logical_expression ')' '{' statement* '}' elif_block* else_block?;
  elif_block : 'elif' '(' logical_expression ')' '{' statement* '}';
  else_block : 'else' '{' statement* '}';
  ```
- **Example Usage:**
  ```mash
  if (x > 5) { echo "x is greater than 5" } 
  elif (x == 5) { echo "x is equal to 5" } 
  else { echo "x is less than 5" }
  ```

### Increment & Decrement
- **Description:** Increases or decreases an `int_var` value by 1.
- **Grammar Definition:**
  ```antlr
  increment_statement : IDENTIFIER '++' ;
  decrement_statement : IDENTIFIER '--' ;
  ```
- **Example Usage:**
  ```mash
  int_var x = 5
  x++
  x--
  ```


## üö® Error Handling
The interpreter provides **user-friendly error messages** to help debug scripts:
- **Variable Declaration Error:** If a variable is redeclared in the same scope.
- **Undefined Variable Error:** If an undeclared variable is referenced.
- **Type Error:** If operations are performed on incompatible data types.
- **Division by Zero Error:** If a division by zero occurs.
- **Syntax Error:** If incorrect syntax is used in the script.

Each error includes a **line number** to make debugging easier.

---

## ‚öôÔ∏è Installation & Execution
To run the interpreter, follow these steps:

1. Install **ANTLR4**:
   ```bash
   pip install antlr4-python3-runtime
   ```

2. Generate parser files using **ANTLR4**:
   ```bash
   antlr4 -Dlanguage=Python3 mash.g4
   ```

3. Run the interpreter:
   ```bash
   python main.py
   ```
